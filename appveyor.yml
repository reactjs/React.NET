version: '{build}'
os: Visual Studio 2017
install:
    - set PATH=%ProgramFiles(x86)%\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\;%PATH%
    - ps: Install-Product node 10
    - npm install --global npm
    - ps: |
        Write-Host "Installing .NET Core SDK..." -ForegroundColor Cyan
        Write-Host "Downloading..."
        $exePath = "$env:TEMP\dotnet-sdk.exe"
        (New-Object Net.WebClient).DownloadFile('https://download.visualstudio.microsoft.com/download/pr/31b5b67f-b787-4f73-a728-5ec61f10a4de/be6430bcd9a62f610cd9f12f8cc2c736/dotnet-sdk-3.0.100-preview3-010431-win-x64.exe', $exePath)
        Write-Host "Installing..."
        cmd /c start /wait "$exePath" /quiet /norestart
        del $exePath
        Write-Host "Installed" -ForegroundColor Green
build:
    project: build.proj
    verbosity: normal
test_script:
    - dotnet test --configuration Release --no-build tests/React.Tests/React.Tests.csproj
artifacts:
    - path: output\*.nupkg

