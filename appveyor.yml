version: '{build}'
os: Visual Studio 2019 Preview
install:
    - set PATH=%ProgramFiles(x86)%\Microsoft Visual Studio\2019\Preview\MSBuild\Current\Bin\;%PATH%
    - ps: Install-Product node 10
    - npm install --global npm
    - ps: |
        Write-Host "Installing .NET Core SDK..." -ForegroundColor Cyan
        Write-Host "Downloading..."
        $exePath = "$env:TEMP\dotnet-sdk.exe"
        (New-Object Net.WebClient).DownloadFile('https://download.visualstudio.microsoft.com/download/pr/4032ceb5-61cd-495a-ab25-475aa2232f28/7eb614e777d87ef0d49f86be4fc8bbde/dotnet-sdk-3.0.100-preview4-011223-win-x64.exe', $exePath)
        Write-Host "Installing..."
        cmd /c start /wait "$exePath" /quiet /norestart
        del $exePath
        Write-Host "Installed" -ForegroundColor Green
build:
    project: build.proj
    verbosity: normal
test_script:
    - dotnet test --configuration Release --no-build tests/React.Tests/React.Tests.csproj
artifacts:
    - path: output\*.nupkg

